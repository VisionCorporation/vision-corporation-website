<main class="relative">
    <router-outlet />
    @if(!hideCookieBanner){
    @if(isCookieOpen || isCustomiseCookieOpen){
    <div class="fixed inset-0 z-50 cookie-overlay transition-opacity duration-500"
        [class.opacity-0]="!isCookieOpen && !isCustomiseCookieOpen"
        [class.opacity-100]="isCookieOpen || isCustomiseCookieOpen" data-aos="fade-up">
    </div>
    }
    @if(isCookieOpen){
    <div class="fixed bottom-0 left-0 right-0 z-[51] w-full max-w-[1250px] mx-auto bg-white shadow-[0_-6px_20px_rgba(0,0,0,0.1)] py-[17px] px-3 md:px-12 lg:px-10 rounded"
        data-aos="fade-up">
        <div class="flex justify-end">
            <button class="cursor-pointer hover:scale-110 transform transition-transform duration-300 ease-in-out"
                (click)="closeCookieBanner()" aria-label="Close cookie banner">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M7.5 7.5L12 12M12 7.5L7.5 12M18.75 9.75C18.75 14.7206 14.7206 18.75 9.75 18.75C4.77944 18.75 0.75 14.7206 0.75 9.75C0.75 4.77944 4.77944 0.75 9.75 0.75C14.7206 0.75 18.75 4.77944 18.75 9.75Z"
                        stroke="#E22420" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
        </div>

        <div class="flex flex-col lg:flex-row items-start lg:items-center gap-6">
            <div class="flex items-start gap-4 w-full lg:max-w-[717px]">
                <div class="flex items-center justify-center shrink-0">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.33334 13.3333V13.336H9.33068V13.3333H9.33334Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M12 20V20.0027H11.9973V20H12Z" stroke="#262626" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path d="M16 14.6667V14.6694H15.9973V14.6667H16Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M18.6667 21.3333V21.336H18.664V21.3333H18.6667Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M22.6667 4V4.00267H22.664V4H22.6667Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M28 10.6667V10.6694H27.9973V10.6667H28Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M28 5.33331V5.33598H27.9973V5.33331H28Z" stroke="#262626" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M16.0027 8.37733C16.6748 9.0534 17.5163 9.53644 18.439 9.77593C19.3618 10.0154 20.3319 10.0025 21.248 9.73867C20.9845 10.6577 20.9713 11.6305 21.2097 12.5564C21.4481 13.4823 21.9294 14.3278 22.604 15.0053C23.2951 15.7002 24.1647 16.1907 25.1168 16.4227C26.069 16.6547 27.0667 16.6191 28 16.32C27.912 19.3849 26.6567 22.3005 24.4907 24.4707C23.3783 25.5891 22.0558 26.4766 20.5992 27.0823C19.1427 27.6879 17.5808 27.9996 16.0033 27.9996C14.4259 27.9996 12.864 27.6879 11.4074 27.0823C9.9509 26.4766 8.62841 25.5891 7.516 24.4707C2.828 19.7653 2.828 12.1373 7.516 7.43067C9.38834 5.54423 11.8369 4.33685 14.4733 4C14.3841 4.79759 14.4752 5.60504 14.7399 6.36269C15.0046 7.12035 15.4362 7.80885 16.0027 8.37733Z"
                            stroke="#262626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>

                </div>

                <div>
                    <h4 class="text-[#262626] text-lg sm:text-2xl leading-6 sm:leading-7 font-semibold">
                        We use cookies to improve your experience
                    </h4>
                    <p class="text-[#5D5D5D] text-base md:text-lg leading-5 sm:leading-6 mt-1">
                        We use essential and optional cookies to enhance your experience, analyse usage, and provide
                        relevant content. You can accept all or manage your preferences.
                    </p>
                </div>
            </div>

            <div
                class="w-full lg:flex-1 flex flex-col md:flex-row justify-center lg:justify-end items-center gap-4 sm:gap-6 mt-2 lg:mt-0">
                <button class="text-nowrap cursor-pointer text-[#2559EB] hover:text-[#1D4ED8] text-base font-medium"
                    (click)="toggleCookieBanners()">
                    Customise
                </button>

                <button (click)="rejectAll()" class="w-full md:w-auto text-nowrap cursor-pointer border border-[#2559EB] text-[#2559EB]
          hover:bg-[#DBE4FE] transition-colors duration-200 focus:outline-none focus:ring-[2px]
          focus:ring-[#2559EB] focus:ring-offset-2 rounded py-3 px-6 text-base font-medium">
                    Reject all
                </button>

                <button (click)="acceptAll()" class="w-full md:w-auto text-nowrap cursor-pointer bg-[#2559EB] hover:bg-[#1D4ED8]
          transition-colors duration-200 focus:outline-none focus:ring-[2px] focus:ring-[#2559EB]
          focus:ring-offset-2 text-white rounded py-3 px-6 text-base font-medium">
                    Accept all
                </button>
            </div>
        </div>
    </div>
    }
    }
    @if(isCustomiseCookieOpen){
    <div class="cookie-banner fixed inset-0 flex items-center justify-center z-[51]">
        <div class="w-full max-w-[1250px] bg-white shadow-[0_0_20px_rgba(0,0,0,0.1)] py-[17px] px-4 md:px-10 rounded-lg overflow-y-auto h-svh sm:max-h-[90vh]"
            data-aos="fade-up">
            <div class="flex justify-end  py-2 z-10">
                <button class="cursor-pointer hover:scale-110 transform transition-transform duration-300 ease-in-out"
                    (click)="toggleCookieBanners()" aria-label="Close customise cookies">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M7.5 7.5L12 12M12 7.5L7.5 12M18.75 9.75C18.75 14.7206 14.7206 18.75 9.75 18.75C4.77944 18.75 0.75 14.7206 0.75 9.75C0.75 4.77944 4.77944 0.75 9.75 0.75C14.7206 0.75 18.75 4.77944 18.75 9.75Z"
                            stroke="#E22420" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>

            <div class="flex items-start flex-col gap-6">
                <div class="border-b border-[#D1D1D1] pb-6">
                    <h4 class="text-[#262626] text-xl sm:text-2xl sm:leading-7">Manage Cookie preferences</h4>
                    <p class="text-[#5D5D5D] text-lg sm:text-xl sm:leading-6">You can choose which types of cookies you
                        want us to use. Essential cookies are always active as theyâ€™re needed for the website to
                        function properly.</p>
                </div>

                <div class="border-b border-[#D1D1D1] pb-6 w-full flex items-center justify-between">
                    <div>
                        <h5 class="text-[#262626] text-lg sm:text-xl sm:leading-6 customise-sub-title">Strictly
                            necessary
                            Cookies</h5>
                        <p class="text-[#5D5D5D] text-lg sm:text-xl sm:leading-6 max-w-[829px]">These cookies are
                            essential for basic website functions such as security, accessibility, and page navigation.
                            The site cannot operate properly without them.</p>
                    </div>

                    <div class="flex items-center justify-center">
                        <button [class]="cookiePreferences.strictlyNecessary ? 'bg-[#E7E7E7]' : 'bg-gray-300'"
                            class="relative inline-flex h-[26px] w-12 border border-[#888888] cursor-not-allowed items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-[4px]"
                            role="switch" [attr.aria-checked]="cookiePreferences.strictlyNecessary" disabled>
                            <span [class]="cookiePreferences.strictlyNecessary ? 'translate-x-[20px]' : 'translate-x-0'"
                                class="inline-block h-5 w-5 transform rounded-full bg-[#4F4F4F] transition-transform duration-300 shadow-lg"></span>
                        </button>
                    </div>
                </div>

                <div class="border-b border-[#D1D1D1] pb-6 w-full flex items-center justify-between">
                    <div>
                        <h5 class="text-[#262626] text-lg sm:text-xl sm:leading-6 customise-sub-title">Functional
                            Cookies
                        </h5>
                        <p class="text-[#5D5D5D] text-lg sm:text-xl sm:leading-6 max-w-[829px]">These cookies remember
                            your preferences and settings, helping us provide a more tailored and consistent user
                            experience.</p>
                    </div>

                    <div class="flex items-center justify-center">
                        <button (click)="toggleCookie('functional')"
                            [class]="cookiePreferences.functional ? 'bg-blue-600' : 'bg-gray-300'"
                            class="relative inline-flex h-[26px] w-12 cursor-pointer items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-[4px]"
                            role="switch" [attr.aria-checked]="cookiePreferences.functional">
                            <span [class]="cookiePreferences.functional ? 'translate-x-[20px]' : 'translate-x-0'"
                                class="inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 shadow-lg"></span>
                        </button>
                    </div>
                </div>

                <div class="border-b border-[#D1D1D1] pb-6 w-full flex items-center justify-between">
                    <div>
                        <h5 class="text-[#262626] text-lg sm:text-xl sm:leading-6 customise-sub-title">Analytics Cookies
                        </h5>
                        <p class="text-[#5D5D5D] text-lg sm:text-xl sm:leading-6 max-w-[829px]">These cookies collect
                            anonymous information about how visitors use our website. They help us measure performance
                            and improve content and usability.</p>
                    </div>

                    <div class="flex items-center justify-center">
                        <button (click)="toggleCookie('analytics')"
                            [class]="cookiePreferences.analytics ? 'bg-blue-600' : 'bg-gray-300'"
                            class="relative inline-flex h-[26px] w-12 cursor-pointer items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-[4px]"
                            role="switch" [attr.aria-checked]="cookiePreferences.analytics">
                            <span [class]="cookiePreferences.analytics ? 'translate-x-[20px]' : 'translate-x-0'"
                                class="inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 shadow-lg"></span>
                        </button>
                    </div>
                </div>

                <div class="border-b border-[#D1D1D1] pb-6 w-full flex items-center justify-between">
                    <div>
                        <h5 class="text-[#262626] text-lg sm:text-xl sm:leading-6 customise-sub-title">Advertising
                            Cookies
                        </h5>
                        <p class="text-[#5D5D5D] text-lg sm:text-xl sm:leading-6 max-w-[829px]">These cookies track your
                            browsing habits to deliver advertising that is more relevant to your interests and to
                            measure the effectiveness of our campaigns.</p>
                    </div>

                    <div class="flex items-center justify-center">
                        <button (click)="toggleCookie('advertising')"
                            [class]="cookiePreferences.advertising ? 'bg-blue-600' : 'bg-gray-300'"
                            class="relative inline-flex h-[26px] w-12 cursor-pointer items-center rounded-full transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 p-[4px]"
                            role="switch" [attr.aria-checked]="cookiePreferences.advertising">
                            <span [class]="cookiePreferences.advertising ? 'translate-x-[20px]' : 'translate-x-0'"
                                class="inline-block h-5 w-5 transform rounded-full bg-white transition-transform duration-300 shadow-lg"></span>
                        </button>
                    </div>
                </div>
            </div>

            <div
                class="w-full lg:flex-1 flex flex-col md:flex-row justify-center lg:justify-end items-center gap-4 sm:gap-6 mt-8 pb-4">
                <button (click)="rejectAll()"
                    class="text-nowrap cursor-pointer text-[#2559EB] hover:text-[#1D4ED8] text-base font-medium">
                    Reject all
                </button>

                <button (click)="acceptAll()" class="w-full md:w-auto text-nowrap cursor-pointer border border-[#2559EB] text-[#2559EB]
    hover:bg-[#DBE4FE] transition-colors duration-200 focus:outline-none focus:ring-[2px]
    focus:ring-[#2559EB] focus:ring-offset-2 rounded py-3 px-6 text-base font-medium">
                    Accept all
                </button>

                <button (click)="confirmCustomiseChoices()" class="w-full md:w-auto text-nowrap cursor-pointer bg-[#2559EB] hover:bg-[#1D4ED8]
          transition-colors duration-200 focus:outline-none focus:ring-[2px] focus:ring-[#2559EB]
          focus:ring-offset-2 text-white rounded py-3 px-6 text-base font-medium">
                    Confirm choices
                </button>
            </div>
        </div>
    </div>
    }

    @if(loading){
    <div class="loading-overlay" id="global-loading-overlay">
        <div class="loader"></div>
    </div>
    }
</main>