<section
    class="relative px-3 md:px-8 lg:px-14 py-[61px] bg-[url('/assets/images/our-expertise-bg.webp')] bg-cover bg-center bg-no-repeat  md:rounded-tl-[200px] md:rounded-tr-[200px] md:rounded-bl-[200px] mb-16">
    <div class="absolute inset-0 pointer-events-none 2xl:rounded-tl-[130px] 2xl:rounded-tr-[130px] 2xl:rounded-bl-[130px]"
        style="
    background: linear-gradient(135deg, rgba(37,89,235,0.95) 0%, rgba(138,56,245,0.95) 50%);
  "></div>
    <app-alert #alert></app-alert>
    <div class="relative z-10 text-center">
        <h3 class="px-4 text-3xl sm:text-[40px] leading-8 sm:leading-12 text-[#FFFFFF]" data-aos="fade-up"
            data-aos-delay="50">Subscribe To Our
            Newsletter</h3>
        <p class="px-4 text-lg sm:text-xl leading-6 sm:leading-8 text-[#FFFFFF] mt-2 mb-8" data-aos="fade-up"
            data-aos-delay="60">Get the latest updates, news,
            and
            offers straight to your inbox</p>
        <form [formGroup]="newsletterForm" (ngSubmit)="submitForm()">
            <div class="max-w-[659px] mx-auto flex flex-col sm:flex-row flex-wrap items-start gap-7 sm:gap-6"
                data-aos="fade-up" data-aos-delay="70">
                <div class="flex flex-col gap-y-3 sm:gap-y-6 flex-1 w-full sm:min-w-[300px]">
                    <div class="w-full bg-[#FFFFFF] py-3 px-3 border border-[#D1D1D1] rounded flex items-center gap-2 sm:max-w-[517px]"
                        [ngClass]="{
    'border-2 border-[#ff6b6b]': newsletterForm.get('email')?.invalid && (newsletterForm.get('email')?.dirty || newsletterForm.get('email')?.touched)
  }">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M21.75 6.75V17.25C21.75 18.4926 20.7426 19.5 19.5 19.5H4.5C3.25736 19.5 2.25 18.4926 2.25 17.25V6.75M21.75 6.75C21.75 5.50736 20.7426 4.5 19.5 4.5H4.5C3.25736 4.5 2.25 5.50736 2.25 6.75M21.75 6.75V6.99271C21.75 7.77405 21.3447 8.49945 20.6792 8.90894L13.1792 13.5243C12.4561 13.9694 11.5439 13.9694 10.8208 13.5243L3.32078 8.90894C2.65535 8.49945 2.25 7.77405 2.25 6.99271V6.75"
                                stroke="#5D5D5D" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>

                        <label for="email" class="sr-only">Email Address</label>
                        <input type="email" id="email" formControlName="email" placeholder="johndoe@email.com"
                            aria-label="Enter your email address" autocomplete="off"
                            class="flex-1 focus:outline-none placeholder:text-[#B0B0B0] placeholder:leading-6 placeholder:font-medium" />
                    </div>

                    @if(newsletterForm.get('email')?.invalid && (newsletterForm.get('email')?.dirty ||
                    newsletterForm.get('email')?.touched)){
                    <span
                        class="text-[#ff6b6b] -mt-2 sm:-mt-5 text-[15px] text-left customise-sub-title flex items-center gap-2">
                        <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7.5 7.5L12 12M12 7.5L7.5 12M18.75 9.75C18.75 14.7206 14.7206 18.75 9.75 18.75C4.77944 18.75 0.75 14.7206 0.75 9.75C0.75 4.77944 4.77944 0.75 9.75 0.75C14.7206 0.75 18.75 4.77944 18.75 9.75Z"
                                stroke="#ff6b6b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        {{ errorMessage('email') }}
                    </span>
                    }

                    <div class="text-left flex items-center lg:justify-start gap-2">
                        <label for="newsletter" class="sr-only">Privacy and Policy</label>
                        <input type="checkbox" id="newsletter" formControlName="agree" class="w-4 h-4 appearance-none bg-white hover:bg-[#DBE4FE] checked:hover:bg-[#1D4ED8] hover:border-[#1D4ED8]
         focus:outline-none focus:ring-[2px] focus:ring-[#2559EB] focus:ring-offset-2
         border-2 border-[#D1D1D1] rounded-[2px] cursor-pointer
         checked:bg-[#2559EB] checked:border-[#2559EB]
         relative before:content-[''] before:absolute before:top-0 before:left-[4px]
         before:w-[5px] before:h-[10px] before:border-r-[2px] before:border-b-[2px]
         before:border-white before:rotate-45 before:opacity-0 checked:before:opacity-100
         transition-all duration-200
         checked:focus:ring-0 checked:focus:ring-offset-0" />
                        <p class="text-sm sm:leading-5 text-white inline">
                            By subscribing you agree to our
                            <a routerLink="/privacy-policy" class="hover:underline">privacy and policy</a>
                        </p>
                    </div>
                </div>

                <button type="submit" [disabled]="isSubcribing || newsletterForm.invalid" class="cursor-pointer flex-1 sm:flex-none bg-[#2559EB] hover:bg-[#1D4ED8] transition-colors duration-200 
  focus:outline-none focus:ring-[2px] focus:ring-[#2559EB] focus:ring-offset-2 text-[#FFFFFF] 
  px-6 py-[13px] rounded w-full sm:w-auto
  disabled:bg-[#E7E7E7] disabled:text-[#4F4F4F] disabled:hover:bg-[#E7E7E7] disabled:cursor-not-allowed">
                    {{ isSubcribing ? 'Subscribing...' : 'Subscribe' }}
                </button>
            </div>
        </form>
    </div>
</section>